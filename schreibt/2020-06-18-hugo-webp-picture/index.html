<!DOCTYPE html>
<html lang="de-DE">
<head>  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <title>Hugo: Markdown Render Hooks &#43; webp = Noch schnellere Websites</title>

    <meta name="description" content="Mit Hugo Markdown Render Hooks generiert man aus einfachem Markdown inviduelles HTML. Das ermöglicht den Einsatz von webp-Bildern plus …">
  <link rel="canonical" href="https://moritz.sauer.io/schreibt/2020-06-18-hugo-webp-picture/" />
  
  <meta name="robots" content="index, follow"/>  
  <meta property="og:type" content="website">
  <meta property="og:url" content="https://moritz.sauer.io/schreibt/2020-06-18-hugo-webp-picture/">
  <meta property="og:title" content="Hugo: Markdown Render Hooks &#43; webp = Noch schnellere Websites - Moritz »mo.« Sauer – Dozent, Webdesigner und Autor">
  <meta property="og:description" content="Moritz »mo.« Sauer arbeitet als Experte für Kunden und Institutionen in den Bereichen Journalismus, WordPress, Marketing, Social Media und Webdesign. - ">
  <meta property="og:image" content="https://moritz.sauer.io/img/about-me.jpg">  
  <meta property="twitter:card" content="summary_large_image">
  <meta property="twitter:url" content="https://moritz.sauer.io/schreibt/2020-06-18-hugo-webp-picture/">
  <meta property="twitter:title" content="Hugo: Markdown Render Hooks &#43; webp = Noch schnellere Websites - Moritz »mo.« Sauer – Dozent, Webdesigner und Autor">
  <meta property="twitter:description" content="Moritz »mo.« Sauer arbeitet als Experte für Kunden und Institutionen in den Bereichen Journalismus, WordPress, Marketing, Social Media und Webdesign. - ">
  <meta property="twitter:image" content="https://moritz.sauer.io/img/about-me.jpg">    
    <script type="application/ld+json">
  {
    "@context": "http://schema.org",
    "@type": "BlogPosting",
    "headline": "Hugo: Markdown Render Hooks \u002b webp = Noch schnellere Websites",
    "mainEntityOfPage": {
      "@type": "WebPage",
      "@id": "https:\/\/moritz.sauer.io\/schreibt\/2020-06-18-hugo-webp-picture\/"
    },
    "image": {
      "@type": "ImageObject",
      "url": "https:\/\/moritz.sauer.io\/assets\/img\/amp-banner-homepage-1600x900.jpg",
      "width":  1600 ,
      "height":  900 
    },
    "genre": "schreibt",
    
    "wordcount":  616 ,
    "url": "https:\/\/moritz.sauer.io\/schreibt\/2020-06-18-hugo-webp-picture\/",
    "datePublished": "2020-06-18",
    "dateModified": "2020-06-18",
    "license": "Alle Rechte vorbehalten",
    "publisher": {
      "@type": "Organization",
      "name": "Phlow",
      "logo": {
        "@type": "ImageObject",
        "url": "https:\/\/moritz.sauer.io\/assets\/img\/amp-logo-schema-small-150-60.png",
        "width":  150 ,
        "height":  60 
      }
    },
    "author": {
      "@type": "Person",
      "name": "Moritz mo. Sauer"
    },
    "description": "Mit Hugo Markdown Render Hooks generiert man aus einfachem Markdown inviduelles HTML. Das ermöglicht den Einsatz von webp-Bildern plus \u0026lt;picture\u0026gt;.\nMeine Websites Phlow.de und moritz.sauer.io baue ich mit Hugo . Die Beiträge verfasse ich in Markdown und seit Längerem wollte ich die Website beschleunigen, indem ich webp-Bilder nutze. Und dafür gibt es jetzt eine einfache Lösung.\nInhaltsverzeichnis\n webp-Bilder aus JPG und PNG-Bildern generieren Vergleich komprimierter Bilder mit jpg, guetzli-jpg und webp  Original JPG-Bild JPG mit guetzli Qualität 85 optimiert Bild mit webp und Qualität 80 optimiert   Hugo Markdown Render Hooks übernehmen die Arbeit substr ersetzt die jpg-Endung mit wepb    Das webp-Format verkleinert Bilder in der Dateigröße besser als JPG."

  }
  </script>

  
  <meta name="google-site-verification" content="6piOPlSVFOatygPZVoxrwnC592hTjB72IUIKgLoHueI">
  <meta name="msvalidate.01" content="">


  <style>@font-face{font-family:ibm plex sans;font-style:normal;font-weight:400;src:url(https://moritz.sauer.io/assets/fonts/ibm-plex-sans-v7-latin-regular.eot);src:local("IBM Plex Sans"),local("IBMPlexSans"),url(https://moritz.sauer.io/assets/fonts/ibm-plex-sans-v7-latin-regular.eot?#iefix)format("embedded-opentype"),url(https://moritz.sauer.io/assets/fonts/ibm-plex-sans-v7-latin-regular.woff2)format("woff2"),url(https://moritz.sauer.io/assets/fonts/ibm-plex-sans-v7-latin-regular.woff)format("woff"),url(https://moritz.sauer.io/assets/fonts/ibm-plex-sans-v7-latin-regular.ttf)format("truetype"),url(https://moritz.sauer.io/assets/fonts/ibm-plex-sans-v7-latin-regular.svg#IBMPlexSans)format("svg")}@font-face{font-family:ibm plex sans;font-style:italic;font-weight:400;src:url(https://moritz.sauer.io/assets/fonts/ibm-plex-sans-v7-latin-italic.eot);src:local("IBM Plex Sans Italic"),local("IBMPlexSans-Italic"),url(https://moritz.sauer.io/assets/fonts/ibm-plex-sans-v7-latin-italic.eot?#iefix)format("embedded-opentype"),url(https://moritz.sauer.io/assets/fonts/ibm-plex-sans-v7-latin-italic.woff2)format("woff2"),url(https://moritz.sauer.io/assets/fonts/ibm-plex-sans-v7-latin-italic.woff)format("woff"),url(https://moritz.sauer.io/assets/fonts/ibm-plex-sans-v7-latin-italic.ttf)format("truetype"),url(https://moritz.sauer.io/assets/fonts/ibm-plex-sans-v7-latin-italic.svg#IBMPlexSans)format("svg")}@font-face{font-family:ibm plex sans;font-style:normal;font-weight:600;src:url(https://moritz.sauer.io/assets/fonts/ibm-plex-sans-v7-latin-600.eot);src:local("IBM Plex Sans SemiBold"),local("IBMPlexSans-SemiBold"),url(https://moritz.sauer.io/assets/fonts/ibm-plex-sans-v7-latin-600.eot?#iefix)format("embedded-opentype"),url(https://moritz.sauer.io/assets/fonts/ibm-plex-sans-v7-latin-600.woff2)format("woff2"),url(https://moritz.sauer.io/assets/fonts/ibm-plex-sans-v7-latin-600.woff)format("woff"),url(https://moritz.sauer.io/assets/fonts/ibm-plex-sans-v7-latin-600.ttf)format("truetype"),url(https://moritz.sauer.io/assets/fonts/ibm-plex-sans-v7-latin-600.svg#IBMPlexSans)format("svg")}@font-face{font-family:ibm plex sans;font-style:italic;font-weight:600;src:url(https://moritz.sauer.io/assets/fonts/ibm-plex-sans-v7-latin-600italic.eot);src:local("IBM Plex Sans SemiBold Italic"),local("IBMPlexSans-SemiBoldItalic"),url(https://moritz.sauer.io/assets/fonts/ibm-plex-sans-v7-latin-600italic.eot?#iefix)format("embedded-opentype"),url(https://moritz.sauer.io/assets/fonts/ibm-plex-sans-v7-latin-600italic.woff2)format("woff2"),url(https://moritz.sauer.io/assets/fonts/ibm-plex-sans-v7-latin-600italic.woff)format("woff"),url(https://moritz.sauer.io/assets/fonts/ibm-plex-sans-v7-latin-600italic.ttf)format("truetype"),url(https://moritz.sauer.io/assets/fonts/ibm-plex-sans-v7-latin-600italic.svg#IBMPlexSans)format("svg")}@font-face{font-family:ibm plex serif;font-style:normal;font-weight:400;src:url(https://moritz.sauer.io/assets/fonts/ibm-plex-serif-v8-latin-regular.eot);src:local("IBM Plex Serif"),local("IBMPlexSerif"),url(https://moritz.sauer.io/assets/fonts/ibm-plex-serif-v8-latin-regular.eot?#iefix)format("embedded-opentype"),url(https://moritz.sauer.io/assets/fonts/ibm-plex-serif-v8-latin-regular.woff2)format("woff2"),url(https://moritz.sauer.io/assets/fonts/ibm-plex-serif-v8-latin-regular.woff)format("woff"),url(https://moritz.sauer.io/assets/fonts/ibm-plex-serif-v8-latin-regular.ttf)format("truetype"),url(https://moritz.sauer.io/assets/fonts/ibm-plex-serif-v8-latin-regular.svg#IBMPlexSerif)format("svg")}@font-face{font-family:ibm plex serif;font-style:italic;font-weight:400;src:url(https://moritz.sauer.io/assets/fonts/ibm-plex-serif-v8-latin-italic.eot);src:local("IBM Plex Serif Italic"),local("IBMPlexSerif-Italic"),url(https://moritz.sauer.io/assets/fonts/ibm-plex-serif-v8-latin-italic.eot?#iefix)format("embedded-opentype"),url(https://moritz.sauer.io/assets/fonts/ibm-plex-serif-v8-latin-italic.woff2)format("woff2"),url(https://moritz.sauer.io/assets/fonts/ibm-plex-serif-v8-latin-italic.woff)format("woff"),url(https://moritz.sauer.io/assets/fonts/ibm-plex-serif-v8-latin-italic.ttf)format("truetype"),url(https://moritz.sauer.io/assets/fonts/ibm-plex-serif-v8-latin-italic.svg#IBMPlexSerif)format("svg")}@font-face{font-family:ibm plex mono;font-style:normal;font-weight:400;src:url(https://moritz.sauer.io/assets/fonts/ibm-plex-mono-v5-latin-regular.eot);src:local("IBM Plex Mono"),local("IBMPlexMono"),url(https://moritz.sauer.io/assets/fonts/ibm-plex-mono-v5-latin-regular.eot?#iefix)format("embedded-opentype"),url(https://moritz.sauer.io/assets/fonts/ibm-plex-mono-v5-latin-regular.woff2)format("woff2"),url(https://moritz.sauer.io/assets/fonts/ibm-plex-mono-v5-latin-regular.woff)format("woff"),url(https://moritz.sauer.io/assets/fonts/ibm-plex-mono-v5-latin-regular.ttf)format("truetype"),url(https://moritz.sauer.io/assets/fonts/ibm-plex-mono-v5-latin-regular.svg#IBMPlexMono)format("svg")}@font-face{font-family:ibm plex mono;font-style:italic;font-weight:400;src:url(https://moritz.sauer.io/assets/fonts/ibm-plex-mono-v5-latin-italic.eot);src:local("IBM Plex Mono Italic"),local("IBMPlexMono-Italic"),url(https://moritz.sauer.io/assets/fonts/ibm-plex-mono-v5-latin-italic.eot?#iefix)format("embedded-opentype"),url(https://moritz.sauer.io/assets/fonts/ibm-plex-mono-v5-latin-italic.woff2)format("woff2"),url(https://moritz.sauer.io/assets/fonts/ibm-plex-mono-v5-latin-italic.woff)format("woff"),url(https://moritz.sauer.io/assets/fonts/ibm-plex-mono-v5-latin-italic.ttf)format("truetype"),url(https://moritz.sauer.io/assets/fonts/ibm-plex-mono-v5-latin-italic.svg#IBMPlexMono)format("svg")}body{font-family:ibm plex sans,neue helvetica,Arial,sans;font-size:16px;line-height:1.65;color:#000;padding:0;margin:0;padding:0 1em;background:#fff}nav{max-width:34rem;margin:0 auto 1rem}#logo{max-width:32rem;margin:1.5rem auto}#slogan{margin-bottom:1.5rem}.layout--column--one{max-width:60rem;margin:0 auto}.layout--column--one p,.layout--column--one dl,.layout--column--one dt,.layout--column--one dd,.layout--column--one ul,.layout--column--one ol,.layout--column--one h2,.layout--column--one h3,.layout--column--one h4,.layout--column--one h5,.layout--column--one h6,.layout--column--one pre,.layout--column--one hr{max-width:34rem;margin-left:auto;margin-right:auto}main.layout--fullwidth{margin:0 auto}main.layout--fullwidth nav,main.layout--fullwidth p,main.layout--fullwidth dl,main.layout--fullwidth dt,main.layout--fullwidth dd,main.layout--fullwidth ul,main.layout--fullwidth ol,main.layout--fullwidth h2,main.layout--fullwidth h3,main.layout--fullwidth h4,main.layout--fullwidth h5,main.layout--fullwidth h6,main.layout--fullwidth pre,main.layout--fullwidth hr{margin-left:auto;margin-right:auto}.grid--col--2{display:grid;grid-template-columns:1fr 1fr;grid-column-gap:1rem;grid-row-gap:2rem}.grid--col--3{display:grid;grid-template-columns:1fr 1fr 1fr;grid-column-gap:1rem;grid-row-gap:2rem}.grid--col--4{display:grid;grid-template-columns:1fr 1fr 1fr 1fr;grid-column-gap:1rem;grid-row-gap:2rem}#footer-navigation{margin-top:16rem}#footer-navigation,#footer-navigation a{color:#aaa;box-shadow:none}ul.blog--list{list-style:none;padding:0}.blog--list li{margin:0 0 1.5rem;display:grid;grid-template-columns:auto 1fr}.blog--list time{font-size:.823em;margin-top:.3rem;padding-right:.5rem}p,dl,h1,h2,h3,h4,h5,h6,blockquote{margin-bottom:1rem}h1,h2,h3,h4,h5,h6{font-weight:400;font-family:ibm plex serif,Georgia,serif;line-height:1.4}h1,.h1{font-size:2.041em;text-align:center}h2,.h2{font-size:1.476em;padding-top:2rem}h3,.h3{font-size:1.296em;padding-top:2rem}h4,.h4{font-size:1.215em}h5,.h5{font-size:1.138em}h6,.h6{font-size:1.067em}a{color:#000;text-decoration:none;box-shadow:inset 0 -5px 0 #1ef2f1;border-bottom:0 solid #1ef2f1;transition:all .3s cubic-bezier(0.33,0.66,0.66,1)}a:hover{box-shadow:inset 0 -3px 0 #ff2020}p a>code{background:0 0}main a:visited{color:#666}strong{font-weight:600}figure{margin:1em 0}figure img{border:1px solid #ddd;margin:0 auto}figcaption{text-align:right;color:#ddd;font-size:.823em}iframe,img{max-width:100%;margin:1rem auto;border-radius:3px;display:block;height:auto}dt{font-weight:700;margin-top:1rem}dt:first-child{margin-top:0}dd{padding:0 0 0 2rem}pre,kbd{overflow:auto;font-family:ibm plex mono,Consolas,andale mono wt,andale mono,lucida console,lucida sans typewriter,dejavu sans mono,bitstream vera sans mono,liberation mono,nimbus mono l,Monaco,courier new,Courier,monospace;font-size:.823em}p code{background:#eaeaea;padding:0 .25rem;border-radius:3px}hr{border:0;border-bottom:1px solid #ddd}blockquote{padding-left:3rem}table{border-spacing:0}th{text-align:left}th,td{border-bottom:1px solid #ddd;vertical-align:top}tr:hover{background:#ddd}mark{background:#ffce6d;padding:.1rem .25rem;border-radius:3px}main.layout--column--one article>p:first-of-type{font-size:1.266em;margin:0 auto 1rem}main.layout--column--one article>p:nth-of-type(2):first-letter{text-shadow:-4px -1px 1px #1ef2f1,3px 2px 1px #ff2020;float:left;font-size:4em;font-family:ibm plex serif,Georgia,serif;text-indent:0;margin:.25rem .25rem 0 0;padding:0 1rem;line-height:1}.pullleft{width:12rem;float:left;margin-right:2rem!important}.pullright{width:12rem;float:right;margin-left:2rem!important}blockquote.pullleft,blockquote.pullright{border-top:5px solid #1ef2f1;border-bottom:5px solid #1ef2f1;padding:1rem}.footnotes{padding-top:3rem;font-size:.823em}.speech-bubble a{box-shadow:inset 0 -5px 0 #ffb520;color:#000}.speech-bubble a:hover{color:#ff2020}.speech-bubble a:visited{color:#000}.m0{margin:0}.mt0{margin-top:0}.mt05{margin-top:.5rem!important}.mt1{margin-top:1rem!important}.mt2{margin-top:2rem!important}.mt3{margin-top:3rem!important}.mb0{margin-bottom:0!important}.mb025{margin-bottom:.25rem!important}.mb05{margin-bottom:.5rem!important}.mb1{margin-bottom:1rem!important}.mb2{margin-bottom:2rem!important}.mb3{margin-bottom:3rem!important}.ml025{margin-left:.25rem!important}.ml1{margin-left:1rem!important}.mr025{margin-right:.25rem!important}.mr1{margin-right:1rem!important}.p0{padding:0}.p1{padding:1rem}.pl025{padding-left:.25rem}.pr025{padding-right:.25rem}.pl05{padding-left:.5rem}.pr05{padding-right:.5rem}.pl1{padding-left:1rem}.pr1{padding-right:1rem}.upcase{text-transform:uppercase}.br{border-radius:3px}.bt{border-top:1px solid #ddd}.bb{border-bottom:1px solid #ddd}.tc{text-align:center}.tr{text-align:right}.center{max-width:34rem;margin:0 auto 1rem}.mono{font-family:ibm plex mono,Consolas,andale mono wt,andale mono,lucida console,lucida sans typewriter,dejavu sans mono,bitstream vera sans mono,liberation mono,nimbus mono l,Monaco,courier new,Courier,monospace}.sans{font-family:ibm plex sans,neue helvetica,Arial,serif}.serif{font-family:ibm plex serif,Georgia,serif}.small{font-size:.823em}.upcase{text-transform:uppercase}.ci1{color:#ff2020}.ci2{color:#1ef2f1}.ci3{color:#ffb520}.ci4{color:#1acc1a}.bgci1{background:#ff2020}.bgci2{background:#1ef2f1}.bgci3{background:#ffb520}.bgci4{background:#1acc1a}.bggrey{background:#aaa}.bggreyl{background:#ddd}.bggreyll{background:#eaeaea}.colgrey{color:#aaa}.colgreyl{color:#ddd}.colgreyll{color:#eaeaea}.nobullet{list-style:none;padding:0}.label{border-radius:3px;padding:.1rem .25rem}.label a{box-shadow:none}.hide-lg{display:none}@media only screen and (max-width:1000px){.grid--col--4{display:grid;grid-template-columns:1fr 1fr}.show--sm{display:none}}@media only screen and (max-width:800px){.grid--col--3,.grid--col--4{display:grid;grid-template-columns:1fr}.show--sm{display:none}}@media only screen and (max-width:540px){.grid--col--2,.grid--col--3,.grid--col--4{display:grid;grid-template-columns:1fr}#logo{max-width:20rem;margin:1rem auto}#slogan{margin-bottom:1rem}.hide--sm{display:none}.show--sm{display:initial}}@media only screen and (min-width:1000px){body{font-size:18px}}</style>


  <link rel="icon" sizes="32x32" href="https://moritz.sauer.io/assets/favicon/favicon-32x32.png" />
  <link rel="icon" sizes="192x192" href="https://moritz.sauer.io/assets/favicon/touch-icon-192x192.png" />
  <link rel="apple-touch-icon-precomposed" sizes="180x180" href="https://moritz.sauer.io/assets/favicon/apple-touch-icon-180x180-precomposed.png" />
  <link rel="apple-touch-icon-precomposed" sizes="152x152" href="https://moritz.sauer.io/assets/favicon/apple-touch-icon-152x152-precomposed.png" />
  <link rel="apple-touch-icon-precomposed" sizes="144x144" href="https://moritz.sauer.io/assets/favicon/apple-touch-icon-144x144-precomposed.png" />
  <link rel="apple-touch-icon-precomposed" sizes="120x120" href="https://moritz.sauer.io/assets/favicon/apple-touch-icon-120x120-precomposed.png" />
  <link rel="apple-touch-icon-precomposed" sizes="114x114" href="https://moritz.sauer.io/assets/favicon/apple-touch-icon-114x114-precomposed.png" />
  <link rel="apple-touch-icon-precomposed" sizes="76x76" href="https://moritz.sauer.io/assets/favicon/apple-touch-icon-76x76-precomposed.png" />
  <link rel="apple-touch-icon-precomposed" sizes="72x72" href="https://moritz.sauer.io/assets/favicon/apple-touch-icon-72x72-precomposed.png" />
  <link rel="apple-touch-icon-precomposed" href="https://moritz.sauer.io/assets/favicon/apple-touch-icon-precomposed.png" />
  <meta name="msapplication-TileImage" content="https://moritz.sauer.io/assets/favicon/msapplication_tileimage.png" />
  <meta name="msapplication-TileColor" content="#fabb00" />


</head>
<body>
<header>
	<nav id="navigation" class="mt05 mb2" aria-label="Main">
      <a href="https://moritz.sauer.io/"  title="Erfahre mehr über mich, Moritz »mo.« Sauer">Moritz »mo.« Sauer</a>
      <a href="https://moritz.sauer.io/seminare/"  title="Besuch die Startseite für eine Übersicht aller Beiträge">unterrichtet</a> und
      <a href="https://moritz.sauer.io/schreibt/"  title="Hier findest Du Beiträge von mir">schreibt</a>.
	</nav>
</header>


<main class="layout--column--one">
	<article>
		<header class="mt3 mb1">
			<h1>Hugo: Markdown Render Hooks &#43; webp = Noch schnellere Websites</h1>
      
		</header>
		<p>Mit Hugo Markdown Render Hooks generiert man aus einfachem Markdown inviduelles HTML. Das ermöglicht den Einsatz von webp-Bildern plus <code>&lt;picture&gt;</code>.</p>
<p>Meine Websites 
<a href="https://phlow.de/" target="_blank" rel="noopener">Phlow.de</a>
 und 
<a href="https://moritz.sauer.io/" target="_blank" rel="noopener">moritz.sauer.io</a>
 baue ich mit 
<a href="https://moritz.sauer.io/schlagwort/hugo/">Hugo</a>
. Die Beiträge verfasse ich in Markdown und seit Längerem wollte ich die Website beschleunigen, indem ich 
<a href="https://web.dev/serve-images-webp/" target="_blank" rel="noopener">webp-Bilder</a>
 nutze. Und dafür gibt es jetzt eine einfache Lösung.</p>

<aside class="toc small center bt bb mt2 mb2">
  
  
    <p class="mt05">Inhaltsverzeichnis</p>
  
  <nav id="TableOfContents">
  <ol>
    <li><a href="#webp-bilder-aus-jpg-und-png-bildern-generieren">webp-Bilder aus JPG und PNG-Bildern generieren</a></li>
    <li><a href="#vergleich-komprimierter-bilder-mit-jpg-guetzli-jpg-und-webp">Vergleich komprimierter Bilder mit jpg, guetzli-jpg und webp</a>
      <ol>
        <li><a href="#original-jpg-bild">Original JPG-Bild</a></li>
        <li><a href="#jpg-mit-guetzli-qualität-85-optimiert">JPG mit guetzli Qualität 85 optimiert</a></li>
        <li><a href="#bild-mit-webp-und-qualität-80-optimiert">Bild mit webp und Qualität 80 optimiert</a></li>
      </ol>
    </li>
    <li><a href="#hugo-markdown-render-hooks-übernehmen-die-arbeit">Hugo Markdown Render Hooks übernehmen die Arbeit</a></li>
    <li><a href="#substr-ersetzt-die-_jpg_-endung-mit-_wepb_"><code>substr</code> ersetzt die <em>jpg</em>-Endung mit <em>wepb</em></a></li>
  </ol>
</nav>
</aside>

<p>Das 
<a href="https://developers.google.com/speed/webp" target="_blank" rel="noopener">webp-Format</a>
 verkleinert Bilder in der Dateigröße besser als JPG. Subjektiv sehen die Bilder aber gleich scharf aus. <strong>Das Problem für die Verwendung von webp</strong>: nicht alle Browser unterstützen das Format.</p>
<p>Das Problem löst man leicht mit HTML, denn dafür steht das 
<a href="https://developer.mozilla.org/de/docs/Web/HTML/Element/picture" target="_blank" rel="noopener"><code>&lt;picture&gt;</code>-Tag</a>
 zur Verfügung. Dieses erlaubt den Einsatz von Bildern für verschiedene Bildschirmgrößen <strong>und</strong> lässt den Einsatz von Dateiformaten zu bzw. überlässt dem Browser die Wahl. Das sieht dann so aus:</p>
<pre><code>&lt;picture&gt;
  &lt;source type=&quot;image/webp&quot; srcset=&quot;bild.webp&quot;&gt;
  &lt;source type=&quot;image/jpeg&quot; srcset=&quot;bild.jpg&quot;&gt;
  &lt;img src=&quot;bild.jpg&quot; alt=&quot;&quot; /&gt;
&lt;/picture&gt;
</code></pre><p>Während Safari weiterhin das <em>jpg</em>-Bildformat bevorzugt, nutzen Chrome und Firefox die <em>webp</em>-Variante.</p>
<h2 id="webp-bilder-aus-jpg-und-png-bildern-generieren">webp-Bilder aus JPG und PNG-Bildern generieren</h2>
<p><em>webp</em>-Bilder generiert man einfach über das 
<a href="https://phlow.de/magazin/terminal/" target="_blank" rel="noopener">Mac Terminal</a>
. Damit das auf meinem Mac funktioniert, habe ich mit <em>homebrew</em> einfach das Werkzeug installiert:</p>
<pre><code>brew install webp
</code></pre><p>Anschließend öffne ich den Ordner mit den Bildern im Terminal und zwei Schleifen für <em>jpg</em>- und <em>png</em>-Bilder konvertieren mir sämtliche Bilder im Ordner:</p>
<pre><code>for i in *.jpg; do cwebp -q 90 $i -o &quot;${i%.*}.webp&quot;; done
for i in *.png; do cwebp -q 90 $i -o &quot;${i%.*}.webp&quot;; done
</code></pre><h2 id="vergleich-komprimierter-bilder-mit-jpg-guetzli-jpg-und-webp">Vergleich komprimierter Bilder mit jpg, guetzli-jpg und webp</h2>
<p>Das folgende Beispiel illustriert, wie die Bilder mit den Maßen 1600 × 1067 schrumpfen. Exemplarisch habe ich 
<a href="https://unsplash.com/photos/6u0xv4j6WKI" target="_blank" rel="noopener">ein Bild von Unsplash</a>
 runtergeladen und auf die Pixelmaße 1600 × 1067 verkleinert. Dann habe ich das Bild mit dem JPG-Komprimierer 
<a href="https://github.com/google/guetzli/" target="_blank" rel="noopener">guetzli</a>
 verkleinert und dann noch mit <em>webp</em>. Die Ergebnisse kannst Du über die folgenden Links öffnen und vergleichen.</p>
<ul>
<li>Original mit 288.482 Byte 
<a href="https://moritz.sauer.io/img/schreibt/webp-hugo-test-1600x1067.jpg">webp-hugo-test-1600x1067.jpg</a>
</li>
<li>guetzli-JPG 189.502 Byte 
<a href="https://moritz.sauer.io/img/schreibt/webp-hugo-test-1600x1067-guetzli.jpg">webp-hugo-test-1600x1067-guetzli.jpg</a>
</li>
<li>webp mit 118.800 Byte
<a href="https://moritz.sauer.io/img/schreibt/webp-hugo-test-1600x1067.webp">webp-hugo-test-1600x1067.webp</a>
</li>
</ul>
<h3 id="original-jpg-bild">Original JPG-Bild</h3>
<img src="https://moritz.sauer.io/img/schreibt/webp-hugo-test-1600x1067.jpg" alt="">
<h3 id="jpg-mit-guetzli-qualität-85-optimiert">JPG mit guetzli Qualität 85 optimiert</h3>
<img src="https://moritz.sauer.io/img/schreibt/webp-hugo-test-1600x1067-guetzli.jpg" alt="">
<h3 id="bild-mit-webp-und-qualität-80-optimiert">Bild mit webp und Qualität 80 optimiert</h3>
<p><strong>Hinweis:</strong> Wenn Du ältere Browser nutzt oder Safari (Stand 2020-06-18), dann wird Dir das Bild nicht angezeigt.</p>
<img src="https://moritz.sauer.io/img/schreibt/webp-hugo-test-1600x1067.webp" alt="">
<h2 id="hugo-markdown-render-hooks-übernehmen-die-arbeit">Hugo Markdown Render Hooks übernehmen die Arbeit</h2>
<p>Beiträge schreibt man in Hugo in Markdown. Die Syntax für ein Bild mit Markdown lautet schlicht:</p>
<pre><code>![Bildtitel](bild.jpg)
</code></pre><p>Das Problem ist: <em>Und wie entsteht daraus das <code>&lt;picture&gt;</code>-Tag?</em></p>
<p>Dafür habe ich heute in den Hugo-News eine für mich neue Funktion entdeckt: die 
<a href="https://gohugo.io/getting-started/configuration-markup#markdown-render-hooks" target="_blank" rel="noopener">Markdown Render Hooks</a>
. Über diese <em>hooks</em> verändert man die Ausgabe der  Markdown-Befehle. Anstelle eines normalen HTML-Bildbefehls realisiert man komplexeres HTML.</p>
<p>Mit einem <em>hook</em> erstellt man zuerst ein Rendering-Template, dass der Markdown-Parser Goldmark benutzt, wenn er z.B. ein Bild entdeckt. Diese Rendering-Templates legt man z.B. so ab:</p>
<pre><code>
.
├── _default
│   ├── <mark>_markup</mark>
│   │   └── <mark>render-image.html</mark>
│   ├── baseof.html
│   ├── blog_frontpage.html
...
</code></pre>
<h2 id="substr-ersetzt-die-_jpg_-endung-mit-_wepb_"><code>substr</code> ersetzt die <em>jpg</em>-Endung mit <em>wepb</em></h2>
<p>In meinem Fall sieht der Code von <em>render-image.html</em> so aus:</p>
<pre><code>&lt;picture&gt;
  &lt;source type=&quot;image/webp&quot; srcset=&quot;{{ substr .Destination 0 -4 | safeURL }}.webp&quot;&gt;
  &lt;source type=&quot;image/jpeg&quot; srcset=&quot;{{ .Destination | safeURL }}&quot;&gt;
  &lt;img src=&quot;{{ .Destination | safeURL }}&quot; alt=&quot;{{ .Text }}&quot; {{ with .Title}} title=&quot;{{ . }}&quot;{{ end }} /&gt;
&lt;/picture&gt;
</code></pre><p>Der kleine Trick ist in <code>substr</code> versteckt. Mit der 
<a href="https://gohugo.io/functions/substr/" target="_blank" rel="noopener">substr-Funktion</a>
 manipuliert man einen String. In diesem Fall schnappt sich <code>substr</code> den von Goldmark übergebenen Link, löscht die letzten drei Zeichen – hier <em>jpg</em> – und hängt anschließend das <em>wepb</em> dran.</p>
<p>Das feine an der ganzen Affäre: Beiträge schreibt man einfach, setzt ein Bild ein und Hugo übernimmt den Rest. Natürlich darf man nicht vergessen die <em>webp</em>-Bilder zu generieren.</p>

		

    <footer id="article-meta" class="mt2">
      <p>


        
        <small>



            
            <em>
              <time datetime="2020-06-18">
              
              
              18. Juni 2020
              </time>
            </em>
            



            
            –
              <a target="_blank" href="mailto:kommentare@sauer.io?subject=Kommentar%20zu%20Hugo%3a%20Markdown%20Render%20Hooks%20%2b%20webp%20%3d%20Noch%20schnellere%20Websites&amp;body=Ich%20freue%20mich%20auf%20Deinen%20Kommentar!Moritz">Kommentar schreiben</a>
            

        </small>
        
      </p>
    </footer>

	</article>
</main>

<footer class="center tr">
  <small><a href="#navigation">Nach oben</a></small>
  <nav id="footer-navigation" class="small mb2" aria-label="Main">
      <a href="https://moritz.sauer.io//info/" title="Mehr Informationen zu dieser Website">Info</a> – 
      <a href="https://moritz.sauer.io//kontakt/" title="Kontaktier mich">Kontakt</a> – 
      <a href="https://phlow.de/impressum/" title="Impressum">Impressum &amp; Datenschutz</a>
  </nav>
</footer>

</body>
</html>
